<UserControl x:Class="SolusManifestApp.Tools.ConfigVdfKeyExtractor.ConfigVdfKeyExtractorControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel MaxWidth="800" HorizontalAlignment="Left" Margin="20">

            <!-- Config.vdf File Path Section -->
            <Border Style="{StaticResource ModernCardStyle}" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Config.vdf File Path"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}"
                               Margin="0,0,0,10"/>
                    <TextBlock Text="Select the Steam config.vdf file containing depot keys"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               TextWrapping="Wrap"
                               Margin="0,0,0,10"/>
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="TxtFilePath"
                                 Grid.Column="0"
                                 Margin="0,0,10,0"/>
                        <Button Grid.Column="1"
                                Content="Browse"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Click="BrowseVdf_Click"
                                Padding="20,8"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- CombinedKeys.key Path Section -->
            <Border Style="{StaticResource ModernCardStyle}" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="CombinedKeys.key Path (for filtering)"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}"
                               Margin="0,0,0,10"/>
                    <TextBlock Text="Optional: Filter out keys that already exist in this file"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               TextWrapping="Wrap"
                               Margin="0,0,0,10"/>
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="TxtCombinedKeysPath"
                                 Grid.Column="0"
                                 Margin="0,0,10,0"/>
                        <Button Grid.Column="1"
                                Content="Browse"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Click="BrowseCombinedKeys_Click"
                                Padding="20,8"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Extract Button -->
            <Button x:Name="BtnExtract"
                    Content="ðŸ”‘ Extract Depot Keys"
                    Click="Extract_Click"
                    HorizontalAlignment="Stretch"
                    Padding="20,15"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Margin="0,0,0,20"/>

            <!-- Results Section -->
            <Border Style="{StaticResource ModernCardStyle}" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Extracted Keys (NEW keys not in combinedkeys.key)"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}"
                               Margin="0,0,0,10"/>

                    <TextBox x:Name="TxtResults"
                             FontFamily="Consolas"
                             FontSize="12"
                             Height="300"
                             Margin="0,0,0,15"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             HorizontalScrollBarVisibility="Auto"
                             IsReadOnly="True"/>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                        <Button Content="ðŸ“‹ Copy to Clipboard"
                                Click="Copy_Click"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Padding="20,10"
                                Margin="0,0,10,0"/>
                        <Button Content="ðŸ’¾ Save to File"
                                Click="Save_Click"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Padding="20,10"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Status -->
            <TextBlock x:Name="TxtStatus"
                       Text="Ready to extract keys"
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       FontSize="12"
                       HorizontalAlignment="Center"/>

        </StackPanel>
    </ScrollViewer>
</UserControl>
